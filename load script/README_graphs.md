# Autoscaling LLM Experiment Graphs

This utility generates publication-quality graphs from the experiment data collected by the `run_autoscale_experiments.sh` script.

## Generated Graphs

The script generates the following types of graphs for each experimental condition:

1. **Latency vs Time with Replicas Overlay**
   - Shows how request latency changes over time
   - Overlays replica count to show scaling events
   - Includes in-flight request count
   - Distinguishes successful and failed requests

2. **Replicas vs Load Over Time**
   - Shows how replica count responds to changing request load
   - Includes average latency per time window
   - Visualizes the autoscaling policy in action

3. **Throughput Analysis**
   - Displays throughput (completed requests per time window)
   - Shows theoretical capacity based on replica count
   - Calculates and plots utilization percentage

4. **Latency Distribution**
   - Histogram with percentiles (p50, p90, p95, p99)
   - Success rate and summary statistics
   - Density estimation for distribution visualization

5. **Scaling Efficiency**
   - Plots throughput vs. number of replicas
   - Compares to ideal linear scaling
   - Calculates scaling efficiency percentages

If multiple experimental conditions are present (e.g., HPA_ON, HPA_OFF), the script also generates comparison graphs:

1. **Latency CDF Comparison**
   - Compares latency distributions across conditions

2. **Latency Percentile Comparison**
   - Bar chart comparing p50, p90, p99 across conditions

3. **Success Rate Comparison**
   - Compares success rates across conditions

## Usage

```bash
# Generate graphs from the latest experiment run
python3 generate_autoscale_graphs.py

# Generate graphs from a specific experiment directory
python3 generate_autoscale_graphs.py --exp_dir out_20250814_180504

# Specify custom output directory
python3 generate_autoscale_graphs.py --out_dir my_paper_graphs
```

## Requirements

- Python 3.6+
- pandas
- matplotlib
- numpy
- seaborn

Install dependencies:
```bash
pip install pandas matplotlib numpy seaborn
```

## Experiment Data Format

The script expects data files generated by `run_autoscale_experiments.sh`:

- `*_requests.csv`: Contains request timestamps, latencies, and status codes
- `*_replicas.csv`: Contains replica count over time

## Paper-Ready Graphics

All generated images are saved in both PNG (300 DPI) and PDF formats, making them suitable for direct inclusion in research papers. The graphs use publication-quality styling with appropriate fonts, colors, and layouts.
